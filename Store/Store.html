<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="device-width" initial-scale=1.0">
    <title>Store</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="page-title-container">
    <h1 class="page-title">Athletica Shop</h1>
  </div>
  <div class="container">
    <div class="products-container">
    </div>

    <div class="order-container">
      <form class="order-form">
        <h2>Your Order</h2>
        <div class="order-items">
        </div>
        <hr>
        <p class="total">Total: $0</p> 
        <button type="submit" disabled>Order is empty</button>
      </form>
    </div>

  </div>


  <script>
    var products = [
    {
      name: "Basket Ball",
      price: 50,
      image: "basketball.jpg",
      quantity: 0
    },
    {
      name: "Volley Ball",
      price: 40,
      image: "volleyball.jpg",
      quantity: 0
    },
    {
      name: "Football",
      price: 60,
      image: "football.jpg",
      quantity: 0
    },
    {
      name: "Cricket Bat",
      price: 60,
      image: "bat.jpg",
      quantity: 0
    },
    {
      name: "Badminton Racket",
      price: 90,
      image: "badminton.jpg",
      quantity: 0
    },
    {
      name: "Mouse Pad",
      price: 30,
      image: "mousepad.jpg",
      quantity: 0
    }
  ];

  var productsContainer = document.querySelector(".products-container");
  var orderItems = document.querySelector(".order-items");
  var total = document.querySelector(".total");
  var checkoutButton = document.querySelector(".order-form button");

  function displayProducts() {
    for (var i = 0; i < products.length; i++) {
      var productDiv = document.createElement("div");
      productDiv.className = "product";

      var productImg = document.createElement("img");
      productImg.src = products[i].image;
      productImg.alt = "Product Image";

      var productInfo = document.createElement("div");
      productInfo.className = "info";

      var productName = document.createElement("h3");
      productName.textContent = products[i].name;

      var productPrice = document.createElement("p");
      productPrice.className = "price";
      productPrice.textContent = "$" + products[i].price;

      var addButton = document.createElement("button");
      addButton.textContent = "Add to Cart";
      
      addButton.addEventListener("click", function() {
        addToCart(this);
      });

      productInfo.appendChild(productName);
      productInfo.appendChild(productPrice);
      productInfo.appendChild(addButton);

      productDiv.appendChild(productImg);
      productDiv.appendChild(productInfo);

      productsContainer.appendChild(productDiv);
    }
  }

  function addToCart(button) {
    var index = button.parentElement.firstChild.textContent;

    for (var i = 0; i < products.length; i++) {
      if (products[i].name == index) {
        products[i].quantity++;

        updateOrderItems();
        updateTotal();
        
        checkoutButton.disabled = false;
        checkoutButton.textContent = "Check Out";
        

        checkoutButton.addEventListener("click", function() {
          window.location.href = "Checkout.html";
        });

        break;
      }
    }
  }

  function updateOrderItems() {
    orderItems.innerHTML = "";

    for (var i = 0; i < products.length; i++) {
      if (products[i].quantity > 0) {
        var orderItemDiv = document.createElement("div");
        orderItemDiv.className = "order-item";

        var orderItemImg = document.createElement("img");
        orderItemImg.src = products[i].image;
        orderItemImg.alt = "Order Item Image";

        var orderItemNameQuantity = document.createElement("p");
        orderItemNameQuantity.textContent =
          products[i].name + " x " + products[i].quantity;

        var orderItemPrice = document.createElement("p");
        orderItemPrice.textContent = "$" + products[i].price * products[i].quantity;

        var removeButton = document.createElement("button");
        removeButton.className = "remove";
        removeButton.textContent = "Remove";

        removeButton.addEventListener("click", function() {
          removeFromCart(this);
        });


        orderItemDiv.appendChild(orderItemImg);
        orderItemDiv.appendChild(orderItemNameQuantity);
        orderItemDiv.appendChild(orderItemPrice);
        orderItemDiv.appendChild(removeButton);

        orderItems.appendChild(orderItemDiv);

      }
    }
  }

  function removeFromCart(button) {
    var index = button.parentElement.firstChild.nextSibling.textContent.split(
      " x "
    )[0];

    for (var i = 0; i < products.length; i++) {
      if (products[i].name == index) {
        products[i].quantity--;

        updateOrderItems();
        updateTotal();

        if (total.textContent == "Total: $0") {
          checkoutButton.disabled = true;
          checkoutButton.textContent = "Order is empty";
        }

        break;
      }
    }
  }


  function updateTotal() {
    var totalAmount = 0;

    for (var i = 0; i < products.length; i++) {
      totalAmount += products[i].price * products[i].quantity;
    }

    total.textContent = "Total: $" + totalAmount;
  }

  displayProducts();

  </script>

</body>

</body>
</html>

